
Running 21 tests using 1 worker

(node:3854) Warning: The 'NO_COLOR' env is ignored due to the 'FORCE_COLOR' env being set.
(Use `node --trace-warnings ...` to show where the warning was created)
(node:3854) Warning: The 'NO_COLOR' env is ignored due to the 'FORCE_COLOR' env being set.
(Use `node --trace-warnings ...` to show where the warning was created)
ðŸ§ª [1/20] Testing first demo run...
ðŸ“Š Quota after first run: [33m1[39m
âœ… [1/20] First demo run works - 1 run remaining
  âœ“   1 [chromium] â€º tests/REALISTIC-ENTERPRISE-READY.spec.ts:7:7 â€º ðŸŒž REALISTIC ENTERPRISE-READY TEST - What Sunspire Actually Does â€º [1/20] Demo mode - First run shows full report with 2 runs remaining (10.5s)
ðŸ§ª [2/20] Testing second demo run...
ðŸ“Š Quota after second run: [33m0[39m
âœ… [2/20] Second demo run works - 0 runs remaining
  âœ“   2 [chromium] â€º tests/REALISTIC-ENTERPRISE-READY.spec.ts:47:7 â€º ðŸŒž REALISTIC ENTERPRISE-READY TEST - What Sunspire Actually Does â€º [2/20] Demo mode - Second run shows report with 0 runs remaining (10.1s)
ðŸ§ª [3/20] Testing quota exhaustion...
âœ… [3/20] Lock overlay appears when quota exhausted
  âœ“   3 [chromium] â€º tests/REALISTIC-ENTERPRISE-READY.spec.ts:89:7 â€º ðŸŒž REALISTIC ENTERPRISE-READY TEST - What Sunspire Actually Does â€º [3/20] Demo mode - Third run triggers lock overlay (quota exhausted) (10.2s)
ðŸ§ª [4/20] Testing timer countdown...
âœ… Timer countdown is visible
âœ… [4/20] Timer/lock overlay system works
  âœ“   4 [chromium] â€º tests/REALISTIC-ENTERPRISE-READY.spec.ts:127:7 â€º ðŸŒž REALISTIC ENTERPRISE-READY TEST - What Sunspire Actually Does â€º [4/20] Demo mode - Timer countdown is visible (9.8s)
ðŸ§ª [5/20] Testing lock overlay unlock button...
âœ… Unlock button found in lock overlay
âœ… [5/20] Lock overlay shows unlock button
  âœ“   5 [chromium] â€º tests/REALISTIC-ENTERPRISE-READY.spec.ts:163:7 â€º ðŸŒž REALISTIC ENTERPRISE-READY TEST - What Sunspire Actually Does â€º [5/20] Lock overlay displays unlock button when quota exhausted (9.8s)
ðŸ§ª [6/20] Testing homepage CTA...
âœ… [6/20] Homepage CTA works with cancel_url: https://sunspire-web-app.vercel.app/?company=TestCo61761196548801&demo=1
  âœ“   6 [chromium] â€º tests/REALISTIC-ENTERPRISE-READY.spec.ts:204:7 â€º ðŸŒž REALISTIC ENTERPRISE-READY TEST - What Sunspire Actually Does â€º [6/20] Homepage CTA routes to Stripe checkout (4.3s)
ðŸ§ª [7/20] Testing pricing page...
âœ… [7/20] Pricing page loads correctly (no CTA button - design choice)
  âœ“   7 [chromium] â€º tests/REALISTIC-ENTERPRISE-READY.spec.ts:229:7 â€º ðŸŒž REALISTIC ENTERPRISE-READY TEST - What Sunspire Actually Does â€º [7/20] Pricing page loads and displays pricing info (3.6s)
ðŸ§ª [8/20] Testing company branding...
âœ… [8/20] Company name displays correctly
  âœ“   8 [chromium] â€º tests/REALISTIC-ENTERPRISE-READY.spec.ts:243:7 â€º ðŸŒž REALISTIC ENTERPRISE-READY TEST - What Sunspire Actually Does â€º [8/20] White-label branding - Company name displays (2.6s)
ðŸ§ª [9/20] Testing custom brand color...
ðŸ“Š Brand color: #FF0000
âœ… [9/20] Custom brand color applies
  âœ“   9 [chromium] â€º tests/REALISTIC-ENTERPRISE-READY.spec.ts:256:7 â€º ðŸŒž REALISTIC ENTERPRISE-READY TEST - What Sunspire Actually Does â€º [9/20] White-label branding - Custom brand color applies (3.9s)
ðŸ§ª [10/20] Testing Phoenix solar calculations with REAL NREL data...
ðŸ“Š Phoenix Annual Production: [33m12956[39m kWh
âœ… [10/20] Phoenix solar data is realistic (NREL API working)
  âœ“  10 [chromium] â€º tests/REALISTIC-ENTERPRISE-READY.spec.ts:273:7 â€º ðŸŒž REALISTIC ENTERPRISE-READY TEST - What Sunspire Actually Does â€º [10/20] Solar calculations - NREL PVWatts data accuracy (Phoenix) (5.5s)
ðŸ§ª [10.5/20] Testing location-based estimate differences...
ðŸ“Š Phoenix production: [33m12956[39m kWh
ðŸ“Š Seattle production: [33m8488[39m kWh
âœ… [10.5/20] Different locations = different estimates (Î” 4468 kWh)
  âœ“  11 [chromium] â€º tests/REALISTIC-ENTERPRISE-READY.spec.ts:298:7 â€º ðŸŒž REALISTIC ENTERPRISE-READY TEST - What Sunspire Actually Does â€º [10.5/20] Different locations produce different estimates (10.7s)
ðŸ§ª [11/20] Testing paid version has no restrictions...
âš ï¸  Logo not found, but that's okay for testing
âœ… [11/20] Paid version has no restrictions and shows logo
  âœ“  12 [chromium] â€º tests/REALISTIC-ENTERPRISE-READY.spec.ts:328:7 â€º ðŸŒž REALISTIC ENTERPRISE-READY TEST - What Sunspire Actually Does â€º [11/20] Paid version - No demo restrictions and logo displays (3.6s)
ðŸ§ª [12/20] Testing Stripe checkout metadata...
âœ… [12/20] Stripe metadata includes tracking params
  âœ“  13 [chromium] â€º tests/REALISTIC-ENTERPRISE-READY.spec.ts:357:7 â€º ðŸŒž REALISTIC ENTERPRISE-READY TEST - What Sunspire Actually Does â€º [12/20] Stripe checkout - Metadata includes tracking params (3.7s)
ðŸ§ª [13/20] Testing back button fix on homepage...
âœ… [13/20] Back button will return to homepage
  âœ“  14 [chromium] â€º tests/REALISTIC-ENTERPRISE-READY.spec.ts:380:7 â€º ðŸŒž REALISTIC ENTERPRISE-READY TEST - What Sunspire Actually Does â€º [13/20] Back button fix - Homepage preserves URL (3.7s)
ðŸ§ª [14/20] Testing back button fix on report page...
âš ï¸  CTA not visible on report page, skipping test
  âœ“  15 [chromium] â€º tests/REALISTIC-ENTERPRISE-READY.spec.ts:400:7 â€º ðŸŒž REALISTIC ENTERPRISE-READY TEST - What Sunspire Actually Does â€º [14/20] Back button fix - Report page preserves state (5.6s)
ðŸ§ª [15/20] Testing pricing page branding...
âœ… [15/20] Pricing page shows correct branding
  âœ“  16 [chromium] â€º tests/REALISTIC-ENTERPRISE-READY.spec.ts:429:7 â€º ðŸŒž REALISTIC ENTERPRISE-READY TEST - What Sunspire Actually Does â€º [15/20] Pricing page maintains branding (3.9s)
ðŸ§ª [16/20] Testing webhook endpoint...
âœ… [16/20] Webhook endpoint exists
  âœ“  17 [chromium] â€º tests/REALISTIC-ENTERPRISE-READY.spec.ts:445:7 â€º ðŸŒž REALISTIC ENTERPRISE-READY TEST - What Sunspire Actually Does â€º [16/20] Stripe webhook endpoint exists (392ms)
ðŸ§ª [17/20] Testing customer dashboard...
  âœ˜  18 [chromium] â€º tests/REALISTIC-ENTERPRISE-READY.spec.ts:459:7 â€º ðŸŒž REALISTIC ENTERPRISE-READY TEST - What Sunspire Actually Does â€º [17/20] Customer dashboard route exists and renders (3.6s)
(node:4982) Warning: The 'NO_COLOR' env is ignored due to the 'FORCE_COLOR' env being set.
(Use `node --trace-warnings ...` to show where the warning was created)
(node:4982) Warning: The 'NO_COLOR' env is ignored due to the 'FORCE_COLOR' env being set.
(Use `node --trace-warnings ...` to show where the warning was created)
ðŸ§ª [18/20] Testing NREL attribution...
âœ… [18/20] NREL attribution is visible
  âœ“  19 [chromium] â€º tests/REALISTIC-ENTERPRISE-READY.spec.ts:476:7 â€º ðŸŒž REALISTIC ENTERPRISE-READY TEST - What Sunspire Actually Does â€º [18/20] NREL PVWatts attribution is visible (5.7s)
ðŸ§ª [19/20] Testing brand persistence...
âœ… [19/20] Branding persists across all pages
  âœ“  20 [chromium] â€º tests/REALISTIC-ENTERPRISE-READY.spec.ts:489:7 â€º ðŸŒž REALISTIC ENTERPRISE-READY TEST - What Sunspire Actually Does â€º [19/20] Multi-page consistency - Branding persists across pages (10.2s)
ðŸ§ª [20/20] Testing complete flow...
âœ… Step 1: Landed on branded demo
âœ… Step 2: Generated solar report
âœ… Step 3: Quota tracked (1 run left)
âœ… Step 4: Second report generated (0 runs left)
âœ… Step 5: Lock overlay appears after quota exhausted
âœ… Step 6: Unlock button exists in lock overlay
âœ… [20/20] COMPLETE DEMO-TO-PURCHASE FLOW WORKS!
  âœ“  21 [chromium] â€º tests/REALISTIC-ENTERPRISE-READY.spec.ts:513:7 â€º ðŸŒž REALISTIC ENTERPRISE-READY TEST - What Sunspire Actually Does â€º [20/20] Complete demo-to-purchase flow simulation (27.2s)


  1) [chromium] â€º tests/REALISTIC-ENTERPRISE-READY.spec.ts:459:7 â€º ðŸŒž REALISTIC ENTERPRISE-READY TEST - What Sunspire Actually Does â€º [17/20] Customer dashboard route exists and renders 

    Error: [2mexpect([22m[31mreceived[39m[2m).[22mtoBe[2m([22m[32mexpected[39m[2m) // Object.is equality[22m

    Expected: [32mfalse[39m
    Received: [31mtrue[39m

      469 |     const pageContent = await page.content();
      470 |     const is404 = pageContent.includes('404') || pageContent.includes('Page Not Found');
    > 471 |     expect(is404).toBe(false);
          |                   ^
      472 |     
      473 |     console.log('âœ… [17/20] Dashboard route exists (deployed successfully)');
      474 |   });
        at /Users/hugowentzel/sunspire-clean/tests/REALISTIC-ENTERPRISE-READY.spec.ts:471:19

    attachment #1: screenshot (image/png) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    test-results/REALISTIC-ENTERPRISE-READY-516bc-rd-route-exists-and-renders-chromium/test-failed-1.png
    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

    attachment #2: video (video/webm) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    test-results/REALISTIC-ENTERPRISE-READY-516bc-rd-route-exists-and-renders-chromium/video.webm
    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

    Error Context: test-results/REALISTIC-ENTERPRISE-READY-516bc-rd-route-exists-and-renders-chromium/error-context.md

    attachment #4: trace (application/zip) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    test-results/REALISTIC-ENTERPRISE-READY-516bc-rd-route-exists-and-renders-chromium/trace.zip
    Usage:

        npx playwright show-trace test-results/REALISTIC-ENTERPRISE-READY-516bc-rd-route-exists-and-renders-chromium/trace.zip

    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

  1 failed
    [chromium] â€º tests/REALISTIC-ENTERPRISE-READY.spec.ts:459:7 â€º ðŸŒž REALISTIC ENTERPRISE-READY TEST - What Sunspire Actually Does â€º [17/20] Customer dashboard route exists and renders 
  20 passed (2.5m)
